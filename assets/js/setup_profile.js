const a0_0x1b2dc8=a0_0x1e1b;function a0_0x1e1b(_0x95a807,_0x4564ea){const _0x22abf4=a0_0x22ab();return a0_0x1e1b=function(_0x1e1b82,_0xd364c4){_0x1e1b82=_0x1e1b82-0x163;let _0x1bab86=_0x22abf4[_0x1e1b82];return _0x1bab86;},a0_0x1e1b(_0x95a807,_0x4564ea);}(function(_0x44d267,_0x3d6d6b){const _0x36cd05=a0_0x1e1b,_0x19a86a=_0x44d267();while(!![]){try{const _0x24dd31=parseInt(_0x36cd05(0x17a))/0x1*(parseInt(_0x36cd05(0x1ac))/0x2)+-parseInt(_0x36cd05(0x188))/0x3+parseInt(_0x36cd05(0x19c))/0x4+parseInt(_0x36cd05(0x179))/0x5*(-parseInt(_0x36cd05(0x194))/0x6)+-parseInt(_0x36cd05(0x1b2))/0x7*(-parseInt(_0x36cd05(0x17d))/0x8)+parseInt(_0x36cd05(0x173))/0x9+parseInt(_0x36cd05(0x1a7))/0xa*(-parseInt(_0x36cd05(0x1b5))/0xb);if(_0x24dd31===_0x3d6d6b)break;else _0x19a86a['push'](_0x19a86a['shift']());}catch(_0x18f5e2){_0x19a86a['push'](_0x19a86a['shift']());}}}(a0_0x22ab,0x88e55));let db=firebase[a0_0x1b2dc8(0x189)](),auth=firebase[a0_0x1b2dc8(0x174)](),useDefaultImageFlag=![],usedDefaultImage=![];function validateForm(){const _0x50f188=a0_0x1b2dc8;document['getElementById']('profile-picture-picker')[_0x50f188(0x1ae)](_0x50f188(0x16f),_0x3741d7=>{const _0x14e58a=_0x50f188,_0x38e592=_0x3741d7['target'][_0x14e58a(0x17f)][0x0],_0x5a969a=new FileReader();_0x5a969a[_0x14e58a(0x1ae)]('load',_0x5475d3=>{const _0x1a440f=_0x14e58a;document[_0x1a440f(0x18f)](_0x1a440f(0x181))['src']=_0x5475d3['target'][_0x1a440f(0x195)];}),_0x38e592&&_0x5a969a[_0x14e58a(0x190)](_0x38e592);});}function useDefaultImage(){const _0x56afbb=a0_0x1b2dc8,_0x1c22bd=firebase[_0x56afbb(0x17c)]()['ref'](),_0x18606d=firebase[_0x56afbb(0x174)](),_0x5d2c0f=firebase['firestore'](),_0x4737b9=_0x56afbb(0x17e);fetch(_0x4737b9)['then'](_0x499b2d=>_0x499b2d[_0x56afbb(0x1a9)]())[_0x56afbb(0x16e)](_0x138617=>{const _0x297859=_0x56afbb,_0x196f08=_0x1c22bd[_0x297859(0x18d)](_0x297859(0x1b6)+_0x18606d[_0x297859(0x1a4)]['uid']+_0x297859(0x177));return _0x196f08['put'](_0x138617);})[_0x56afbb(0x16e)](_0x59afc1=>_0x59afc1[_0x56afbb(0x187)][_0x56afbb(0x169)]())[_0x56afbb(0x16e)](_0x5c6fbd=>{const _0x1ac900=_0x56afbb;return _0x5d2c0f[_0x1ac900(0x180)](_0x1ac900(0x18a))[_0x1ac900(0x19b)](_0x18606d[_0x1ac900(0x1a4)][_0x1ac900(0x16d)])[_0x1ac900(0x1a3)]({'profileIMG':_0x5c6fbd});})[_0x56afbb(0x16e)](()=>{const _0x1ccdec=_0x56afbb;console[_0x1ccdec(0x191)]('Updated\x20profile\x20with\x20default\x20image'),document[_0x1ccdec(0x18f)](_0x1ccdec(0x181))[_0x1ccdec(0x167)]=_0x4737b9;})[_0x56afbb(0x1af)](_0x3ecc56=>{const _0x208688=_0x56afbb;console['error']('Error\x20setting\x20default\x20picture:',_0x3ecc56),alert(_0x208688(0x1b4));});}function submitProfile(){const _0xab42d2=a0_0x1b2dc8,_0x294566=document['getElementById']('profile-picture-picker'),_0x2d4799=firebase['auth'](),_0x20add5=firebase[_0xab42d2(0x189)]();if(useDefaultImageFlag)useDefaultImage(_0x2d4799,_0x20add5);else{const _0x3e96a0=_0x294566[_0xab42d2(0x17f)][0x0];console[_0xab42d2(0x191)](usedDefaultImage);const _0x3040ec=_0x20add5[_0xab42d2(0x180)]('Users')['doc'](_0x2d4799['currentUser'][_0xab42d2(0x16d)]);_0x3040ec[_0xab42d2(0x198)]()[_0xab42d2(0x16e)](_0x149a7c=>{const _0xf05fb6=_0xab42d2;if(_0x149a7c['exists']){const _0x3eaed9=_0x149a7c[_0xf05fb6(0x192)]();if(_0x3e96a0){document[_0xf05fb6(0x1a1)]('submitButton')[_0xf05fb6(0x1a6)]='loading...';const _0x4111ca=new FileReader();_0x4111ca[_0xf05fb6(0x168)]=function(_0x37eac3){const _0x5b3c51=_0xf05fb6,_0x11d56e=new Image();_0x11d56e[_0x5b3c51(0x168)]=function(){const _0xf98551=_0x5b3c51;_0x11d56e[_0xf98551(0x172)]===_0x11d56e[_0xf98551(0x19e)]?uploadProfilePicture(_0x3e96a0,_0x2d4799,_0x20add5):(alert(_0xf98551(0x1aa)),document[_0xf98551(0x1a1)]('submitButton')[_0xf98551(0x193)]=_0xf98551(0x197));},_0x11d56e[_0x5b3c51(0x1ab)]=function(){const _0x3e0213=_0x5b3c51;alert(_0x3e0213(0x18b)),document[_0x3e0213(0x1a1)]('submitButton')[_0x3e0213(0x193)]=_0x3e0213(0x197);},_0x11d56e[_0x5b3c51(0x167)]=_0x37eac3[_0x5b3c51(0x1a2)][_0x5b3c51(0x195)];},_0x4111ca[_0xf05fb6(0x1ab)]=function(){const _0x4f1273=_0xf05fb6;alert('There\x20was\x20an\x20error\x20reading\x20the\x20file.'),document['getElementById'](_0x4f1273(0x163))[_0x4f1273(0x193)]=_0x4f1273(0x197);},_0x4111ca[_0xf05fb6(0x190)](_0x3e96a0);}else{if(_0x3eaed9[_0xf05fb6(0x183)])updateUserProfile(_0x3eaed9['profileIMG'],_0x2d4799,_0x20add5);else{if(usedDefaultImage){const _0x10d3e0=_0xf05fb6(0x17e);fetch(_0x10d3e0)[_0xf05fb6(0x16e)](_0x39d0e9=>_0x39d0e9[_0xf05fb6(0x1a9)]())['then'](_0x12eca1=>{const _0x5d262b=_0xf05fb6,_0x5d29ce=new File([_0x12eca1],_0x5d262b(0x196),{'type':_0x5d262b(0x1ad)});uploadProfilePicture(_0x5d29ce,_0x2d4799,_0x20add5);});}else alert('Please\x20upload\x20a\x20profile\x20picture,\x20or\x20use\x20default.'),document['getElementById'](_0xf05fb6(0x163))['innerHTML']=_0xf05fb6(0x197);}}}});}}function a0_0x22ab(){const _0xeda01e=['ref','3069684lSCoUC','firestore','Users','There\x20was\x20an\x20error\x20reading\x20the\x20image.','value','child','DOMContentLoaded','querySelector','readAsDataURL','log','data','innerHTML','226854gxUDeC','result','default_user.jpeg','takeoff\x20<span\x20style=\x22padding-left:\x205px;\x22>ðŸš€</span>','get','href','Error\x20updating\x20profile:','doc','3281176jHQyTa','pop','height','error','exists','getElementById','target','update','currentUser','Using\x20default\x20image!','innerText','51470aCVXfU','/account.html?action=setupProfile','blob','Please\x20upload\x20a\x20square\x20image.','onerror','78362ImoJTX','image/jpeg','addEventListener','catch','put','location','320236QSrBUz','click','Error\x20setting\x20default\x20picture.\x20Please\x20try\x20again\x20later.','781DfnLLb','users_profilePic/','submitButton','set','They\x27re\x20still\x20thinking\x20of\x20a\x20bio...','saving...','src','onload','getDownloadURL','trim','uploading...','bio','uid','then','change','email','edit-profile-userid','width','2974563rPtNjQ','auth','Error\x20uploading\x20profile\x20picture.\x20Please\x20try\x20again\x20later.','edit-profile-full-name','.jpeg','/signin.html','100UwsLeP','21DRZjLd','https://placeholder.co/100x100','storage','128KsNHip','/assets/img/default_user.jpeg','files','collection','.profile-picture-picker-image','split','profileIMG','name','use-default-image','User\x20is\x20not\x20authenticated'];a0_0x22ab=function(){return _0xeda01e;};return a0_0x22ab();}function updateUserProfile(_0x393be8,_0x558a86,_0x1f1349){const _0x33c8ef=a0_0x1b2dc8,_0x157263=document[_0x33c8ef(0x1a1)]('edit-profile-full-name'),_0x19baf1=document[_0x33c8ef(0x1a1)]('bio');!_0x19baf1['value'][_0x33c8ef(0x16a)]()&&(_0x19baf1[_0x33c8ef(0x18c)]=_0x33c8ef(0x165));if(_0x558a86[_0x33c8ef(0x1a4)]){const _0x373b54=_0x1f1349['collection'](_0x33c8ef(0x18a))['doc'](_0x558a86[_0x33c8ef(0x1a4)][_0x33c8ef(0x16d)]);document[_0x33c8ef(0x1a1)](_0x33c8ef(0x163))[_0x33c8ef(0x1a6)]=_0x33c8ef(0x166),_0x373b54[_0x33c8ef(0x1a3)]({'name':_0x157263[_0x33c8ef(0x18c)],'bio':_0x19baf1[_0x33c8ef(0x18c)],'profileIMG':_0x393be8})['then'](()=>{const _0x123574=_0x33c8ef;console[_0x123574(0x191)]('Profile\x20updated\x20with\x20new\x20image'),setTimeout(()=>{const _0x1fea9d=_0x123574;document[_0x1fea9d(0x1a1)](_0x1fea9d(0x163))['innerText']='done!',window['location'][_0x1fea9d(0x199)]=_0x1fea9d(0x1a8);},0x3e8);})['catch'](_0x10cf8b=>{const _0x3045f6=_0x33c8ef;alert('Error\x20updating\x20profile.\x20Please\x20try\x20again\x20later.'),console['error'](_0x3045f6(0x19a),_0x10cf8b);});}else console[_0x33c8ef(0x19f)](_0x33c8ef(0x186)),alert('User\x20is\x20not\x20authenticated.\x20Please\x20log\x20in\x20and\x20try\x20again.');}function uploadProfilePicture(_0xd0397e,_0x544dd7,_0x52c9df){const _0x4177da=a0_0x1b2dc8,_0xfcaedf=firebase['storage']()['ref'](),_0xc4a510=_0xd0397e[_0x4177da(0x184)][_0x4177da(0x182)]('.')[_0x4177da(0x19d)](),_0x181de1=_0x544dd7[_0x4177da(0x1a4)][_0x4177da(0x16d)]+'.'+_0xc4a510,_0x5380b5=_0xfcaedf[_0x4177da(0x18d)](_0x4177da(0x1b6)+_0x181de1);document['getElementById'](_0x4177da(0x163))['innerText']=_0x4177da(0x16b),_0x5380b5[_0x4177da(0x1b0)](_0xd0397e)[_0x4177da(0x16e)](_0xc4d895=>{return _0xc4d895['ref']['getDownloadURL']();})[_0x4177da(0x16e)](_0x37c46e=>{return updateUserProfile(_0x37c46e,_0x544dd7,_0x52c9df);})['catch'](_0x543489=>{const _0x3292c2=_0x4177da;alert(_0x3292c2(0x175)),console['error']('Error\x20uploading\x20profile\x20picture:',_0x543489);});}document[a0_0x1b2dc8(0x1ae)](a0_0x1b2dc8(0x18e),()=>{const _0x13699e=a0_0x1b2dc8;let _0x310ff5=firebase['auth'](),_0x25699a=firebase[_0x13699e(0x189)]();const _0x4465f3=document[_0x13699e(0x1a1)](_0x13699e(0x176)),_0x4d1c13=document[_0x13699e(0x1a1)](_0x13699e(0x171)),_0x2c047a=document[_0x13699e(0x1a1)]('edit-profile-email'),_0x3f3df9=document[_0x13699e(0x1a1)](_0x13699e(0x16c)),_0x415a4c=document['getElementById'](_0x13699e(0x163)),_0x18ea0f=document[_0x13699e(0x1a1)](_0x13699e(0x185));_0x415a4c[_0x13699e(0x1ae)]('click',_0x3a4b78=>{_0x3a4b78['preventDefault'](),useDefaultImageFlag=![],submitProfile();}),_0x18ea0f[_0x13699e(0x1ae)](_0x13699e(0x1b3),()=>{const _0x4f2e59=_0x13699e;useDefaultImageFlag=!![],usedDefaultImage=!![],alert(_0x4f2e59(0x1a5)),submitProfile();}),_0x310ff5['onAuthStateChanged'](function(_0x4f70fe){const _0xb67f3f=_0x13699e;if(_0x4f70fe){validateForm();const _0x289a6e=_0x25699a[_0xb67f3f(0x180)]('Users')[_0xb67f3f(0x19b)](_0x4f70fe[_0xb67f3f(0x16d)]),_0x9b72ec=new Date();_0x289a6e[_0xb67f3f(0x164)]({'lastActive':_0x9b72ec},{'merge':!![]});const _0x5c9b7e=_0x25699a[_0xb67f3f(0x180)](_0xb67f3f(0x18a))[_0xb67f3f(0x19b)](_0x310ff5[_0xb67f3f(0x1a4)][_0xb67f3f(0x16d)]);_0x5c9b7e[_0xb67f3f(0x198)]()[_0xb67f3f(0x16e)](_0x40c387=>{const _0x25d7c3=_0xb67f3f;if(_0x40c387[_0x25d7c3(0x1a0)]){const _0x5ecdaa=_0x40c387[_0x25d7c3(0x192)]();_0x4465f3['value']=_0x5ecdaa[_0x25d7c3(0x184)],_0x4d1c13[_0x25d7c3(0x18c)]=_0x5ecdaa['senderId'],_0x2c047a[_0x25d7c3(0x18c)]=_0x5ecdaa[_0x25d7c3(0x170)],bio[_0x25d7c3(0x18c)]&&(bio[_0x25d7c3(0x18c)]=_0x5ecdaa[_0x25d7c3(0x16c)]),console[_0x25d7c3(0x191)](_0x5ecdaa[_0x25d7c3(0x183)]),document[_0x25d7c3(0x18f)](_0x25d7c3(0x181))['src']=_0x5ecdaa[_0x25d7c3(0x183)]==''?_0x25d7c3(0x17b):_0x5ecdaa['profileIMG'];}});}else alert('Cannot\x20get\x20current\x20user\x20details.\x20Please\x20sign\x20in\x20first\x20or\x20refresh\x20the\x20page.'),window[_0xb67f3f(0x1b1)][_0xb67f3f(0x199)]=_0xb67f3f(0x178);});});