const a0_0x40274a=a0_0x5ca7;function a0_0x2cc8(){const _0x332510=['load','uploading...','5457416NVcott','result','firestore','bio','saving...','193002IHFIEb','User\x20is\x20not\x20authenticated','querySelector','Users','set','currentUser','height','Updated\x20profile\x20with\x20default\x20image','doc','update','submitButton','split','User\x20is\x20not\x20authenticated.\x20Please\x20log\x20in\x20and\x20try\x20again.','profile-picture-picker','Error\x20updating\x20profile:','DOMContentLoaded','preventDefault','edit-profile-email','.profile-picture-picker-image','pop','.jpeg','onload','target','exists','users_profilePic/','5762mBiUsX','12DkCdMk','14oKlmQy','takeoff\x20<span\x20style=\x22padding-left:\x205px;\x22>ðŸš€</span>','442iOxoDM','error','files','/account.html?action=setupProfile','then','email','profileIMG','getElementById','location','/assets/img/default_user.jpeg','name','use-default-image','put','get','data','innerText','edit-profile-userid','loading...','collection','edit-profile-full-name','492144DzdWDh','auth','click','default_user.jpeg','Error\x20uploading\x20profile\x20picture.\x20Please\x20try\x20again\x20later.','value','href','6704055YzHSIj','Using\x20default\x20image!','width','There\x20was\x20an\x20error\x20reading\x20the\x20file.','getDownloadURL','addEventListener','ref','log','1279161wVDstU','innerHTML','They\x27re\x20still\x20thinking\x20of\x20a\x20bio...','onerror','onAuthStateChanged','/signin.html','Error\x20setting\x20default\x20picture.\x20Please\x20try\x20again\x20later.','src','Error\x20uploading\x20profile\x20picture:','storage','readAsDataURL','catch','Please\x20upload\x20a\x20profile\x20picture,\x20or\x20use\x20default.','child','image/jpeg','uid','Cannot\x20get\x20current\x20user\x20details.\x20Please\x20sign\x20in\x20first\x20or\x20refresh\x20the\x20page.','28196890tCCkUf','change'];a0_0x2cc8=function(){return _0x332510;};return a0_0x2cc8();}(function(_0x58b580,_0x11b5d4){const _0x2f9630=a0_0x5ca7,_0x8bd32a=_0x58b580();while(!![]){try{const _0x11e1de=parseInt(_0x2f9630(0x13c))/0x1*(-parseInt(_0x2f9630(0x138))/0x2)+-parseInt(_0x2f9630(0x150))/0x3*(parseInt(_0x2f9630(0x139))/0x4)+parseInt(_0x2f9630(0x157))/0x5+parseInt(_0x2f9630(0x11f))/0x6+parseInt(_0x2f9630(0x13a))/0x7*(-parseInt(_0x2f9630(0x11a))/0x8)+-parseInt(_0x2f9630(0x15f))/0x9+parseInt(_0x2f9630(0x116))/0xa;if(_0x11e1de===_0x11b5d4)break;else _0x8bd32a['push'](_0x8bd32a['shift']());}catch(_0x4fdf6f){_0x8bd32a['push'](_0x8bd32a['shift']());}}}(a0_0x2cc8,0xe0c3e));let db=firebase[a0_0x40274a(0x11c)](),auth=firebase[a0_0x40274a(0x151)](),useDefaultImageFlag=![],usedDefaultImage=![];function a0_0x5ca7(_0x25e4af,_0x44428e){const _0x2cc85c=a0_0x2cc8();return a0_0x5ca7=function(_0x5ca7f5,_0x19c564){_0x5ca7f5=_0x5ca7f5-0x111;let _0x2d0c74=_0x2cc85c[_0x5ca7f5];return _0x2d0c74;},a0_0x5ca7(_0x25e4af,_0x44428e);}function validateForm(){const _0x5335c5=a0_0x40274a;document[_0x5335c5(0x143)](_0x5335c5(0x12c))[_0x5335c5(0x15c)](_0x5335c5(0x117),_0x7dabff=>{const _0x5ed450=_0x5335c5,_0x4fd3e3=_0x7dabff[_0x5ed450(0x135)][_0x5ed450(0x13e)][0x0],_0x3ba3e0=new FileReader();_0x3ba3e0[_0x5ed450(0x15c)](_0x5ed450(0x118),_0x42dbac=>{const _0x17b663=_0x5ed450;document[_0x17b663(0x121)](_0x17b663(0x131))['src']=_0x42dbac[_0x17b663(0x135)][_0x17b663(0x11b)];}),_0x4fd3e3&&_0x3ba3e0[_0x5ed450(0x169)](_0x4fd3e3);});}function useDefaultImage(){const _0x1c3bc1=a0_0x40274a,_0xaf07ae=firebase[_0x1c3bc1(0x168)]()[_0x1c3bc1(0x15d)](),_0x41ab67=firebase[_0x1c3bc1(0x151)](),_0x1c1098=firebase['firestore'](),_0x5fb627=_0x1c3bc1(0x145);fetch(_0x5fb627)[_0x1c3bc1(0x140)](_0x23a71d=>_0x23a71d['blob']())['then'](_0x3cdf30=>{const _0x1233e4=_0x1c3bc1,_0x380e31=_0xaf07ae[_0x1233e4(0x112)](_0x1233e4(0x137)+_0x41ab67[_0x1233e4(0x124)][_0x1233e4(0x114)]+_0x1233e4(0x133));return _0x380e31['put'](_0x3cdf30);})['then'](_0x2cd846=>_0x2cd846[_0x1c3bc1(0x15d)]['getDownloadURL']())['then'](_0x4d434d=>{const _0x5f5642=_0x1c3bc1;return _0x1c1098[_0x5f5642(0x14e)]('Users')[_0x5f5642(0x127)](_0x41ab67[_0x5f5642(0x124)]['uid'])['update']({'profileIMG':_0x4d434d});})[_0x1c3bc1(0x140)](()=>{const _0x268147=_0x1c3bc1;console[_0x268147(0x15e)](_0x268147(0x126)),document[_0x268147(0x121)](_0x268147(0x131))[_0x268147(0x166)]=_0x5fb627;})[_0x1c3bc1(0x16a)](_0x43c711=>{const _0x33116b=_0x1c3bc1;console['error']('Error\x20setting\x20default\x20picture:',_0x43c711),alert(_0x33116b(0x165));});}function submitProfile(){const _0x593eb0=a0_0x40274a,_0x14506a=document[_0x593eb0(0x143)](_0x593eb0(0x12c)),_0x569712=firebase[_0x593eb0(0x151)](),_0x26508e=firebase[_0x593eb0(0x11c)]();if(useDefaultImageFlag)useDefaultImage(_0x569712,_0x26508e);else{const _0x434492=_0x14506a['files'][0x0];console[_0x593eb0(0x15e)](usedDefaultImage);const _0x6ad08e=_0x26508e['collection']('Users')[_0x593eb0(0x127)](_0x569712['currentUser']['uid']);_0x6ad08e[_0x593eb0(0x149)]()[_0x593eb0(0x140)](_0x904fb7=>{const _0x1f7a7c=_0x593eb0;if(_0x904fb7[_0x1f7a7c(0x136)]){const _0xf41e98=_0x904fb7[_0x1f7a7c(0x14a)]();if(_0x434492){document[_0x1f7a7c(0x143)](_0x1f7a7c(0x129))[_0x1f7a7c(0x14b)]=_0x1f7a7c(0x14d);const _0x512bdd=new FileReader();_0x512bdd['onload']=function(_0x4c7814){const _0x4aec79=_0x1f7a7c,_0x5b9e45=new Image();_0x5b9e45[_0x4aec79(0x134)]=function(){const _0x48b3a2=_0x4aec79;_0x5b9e45[_0x48b3a2(0x159)]===_0x5b9e45[_0x48b3a2(0x125)]?uploadProfilePicture(_0x434492,_0x569712,_0x26508e):(alert('Please\x20upload\x20a\x20square\x20image.'),document[_0x48b3a2(0x143)](_0x48b3a2(0x129))[_0x48b3a2(0x160)]='takeoff\x20<span\x20style=\x22padding-left:\x205px;\x22>ðŸš€</span>');},_0x5b9e45[_0x4aec79(0x162)]=function(){const _0x1d3c27=_0x4aec79;alert('There\x20was\x20an\x20error\x20reading\x20the\x20image.'),document[_0x1d3c27(0x143)](_0x1d3c27(0x129))[_0x1d3c27(0x160)]=_0x1d3c27(0x13b);},_0x5b9e45['src']=_0x4c7814['target']['result'];},_0x512bdd['onerror']=function(){const _0x3c0fc3=_0x1f7a7c;alert(_0x3c0fc3(0x15a)),document[_0x3c0fc3(0x143)](_0x3c0fc3(0x129))[_0x3c0fc3(0x160)]=_0x3c0fc3(0x13b);},_0x512bdd[_0x1f7a7c(0x169)](_0x434492);}else{if(_0xf41e98[_0x1f7a7c(0x142)])updateUserProfile(_0xf41e98['profileIMG'],_0x569712,_0x26508e);else{if(usedDefaultImage){const _0xdc3aa5=_0x1f7a7c(0x145);fetch(_0xdc3aa5)[_0x1f7a7c(0x140)](_0x259cde=>_0x259cde['blob']())[_0x1f7a7c(0x140)](_0x3dc6b7=>{const _0x1f7d8c=_0x1f7a7c,_0x2c6f2c=new File([_0x3dc6b7],_0x1f7d8c(0x153),{'type':_0x1f7d8c(0x113)});uploadProfilePicture(_0x2c6f2c,_0x569712,_0x26508e);});}else alert(_0x1f7a7c(0x111)),document[_0x1f7a7c(0x143)](_0x1f7a7c(0x129))[_0x1f7a7c(0x160)]='takeoff\x20<span\x20style=\x22padding-left:\x205px;\x22>ðŸš€</span>';}}}});}}function updateUserProfile(_0x367f92,_0x11b465,_0x26e426){const _0x15eebe=a0_0x40274a,_0x35f519=document['getElementById'](_0x15eebe(0x14f)),_0x942e5a=document[_0x15eebe(0x143)]('bio');!_0x942e5a['value']['trim']()&&(_0x942e5a[_0x15eebe(0x155)]=_0x15eebe(0x161));if(_0x11b465[_0x15eebe(0x124)]){const _0x39c57b=_0x26e426['collection']('Users')[_0x15eebe(0x127)](_0x11b465[_0x15eebe(0x124)][_0x15eebe(0x114)]);document[_0x15eebe(0x143)](_0x15eebe(0x129))[_0x15eebe(0x14b)]=_0x15eebe(0x11e),_0x39c57b[_0x15eebe(0x128)]({'name':_0x35f519['value'],'bio':_0x942e5a[_0x15eebe(0x155)],'profileIMG':_0x367f92})['then'](()=>{const _0x53aca3=_0x15eebe;console[_0x53aca3(0x15e)]('Profile\x20updated\x20with\x20new\x20image'),setTimeout(()=>{const _0xf6c118=_0x53aca3;document[_0xf6c118(0x143)](_0xf6c118(0x129))[_0xf6c118(0x14b)]='done!',window[_0xf6c118(0x144)][_0xf6c118(0x156)]=_0xf6c118(0x13f);},0x3e8);})[_0x15eebe(0x16a)](_0x52154c=>{const _0x5e53c7=_0x15eebe;alert('Error\x20updating\x20profile.\x20Please\x20try\x20again\x20later.'),console[_0x5e53c7(0x13d)](_0x5e53c7(0x12d),_0x52154c);});}else console[_0x15eebe(0x13d)](_0x15eebe(0x120)),alert(_0x15eebe(0x12b));}function uploadProfilePicture(_0x32576c,_0x7e9f78,_0x22c98e){const _0x325e92=a0_0x40274a,_0x197373=firebase[_0x325e92(0x168)]()[_0x325e92(0x15d)](),_0xb09b29=_0x32576c[_0x325e92(0x146)][_0x325e92(0x12a)]('.')[_0x325e92(0x132)](),_0x3ffe9d=_0x7e9f78[_0x325e92(0x124)][_0x325e92(0x114)]+'.'+_0xb09b29,_0x2ff281=_0x197373[_0x325e92(0x112)](_0x325e92(0x137)+_0x3ffe9d);document['getElementById'](_0x325e92(0x129))['innerText']=_0x325e92(0x119),_0x2ff281[_0x325e92(0x148)](_0x32576c)['then'](_0x4d4f32=>{const _0x421ee4=_0x325e92;return _0x4d4f32['ref'][_0x421ee4(0x15b)]();})[_0x325e92(0x140)](_0x2ebeb5=>{return updateUserProfile(_0x2ebeb5,_0x7e9f78,_0x22c98e);})['catch'](_0x1af39f=>{const _0x404f2e=_0x325e92;alert(_0x404f2e(0x154)),console[_0x404f2e(0x13d)](_0x404f2e(0x167),_0x1af39f);});}document[a0_0x40274a(0x15c)](a0_0x40274a(0x12e),()=>{const _0x592e3a=a0_0x40274a;let _0x3f7783=firebase[_0x592e3a(0x151)](),_0x28fff2=firebase[_0x592e3a(0x11c)]();const _0x3142b7=document[_0x592e3a(0x143)](_0x592e3a(0x14f)),_0x27af44=document[_0x592e3a(0x143)](_0x592e3a(0x14c)),_0x4981c7=document[_0x592e3a(0x143)](_0x592e3a(0x130)),_0x156b1f=document['getElementById'](_0x592e3a(0x11d)),_0x5c673b=document[_0x592e3a(0x143)]('submitButton'),_0x150982=document[_0x592e3a(0x143)](_0x592e3a(0x147));_0x5c673b[_0x592e3a(0x15c)](_0x592e3a(0x152),_0x1d8280=>{const _0x43f9bb=_0x592e3a;_0x1d8280[_0x43f9bb(0x12f)](),useDefaultImageFlag=![],submitProfile();}),_0x150982['addEventListener'](_0x592e3a(0x152),()=>{const _0x470e1d=_0x592e3a;useDefaultImageFlag=!![],usedDefaultImage=!![],alert(_0x470e1d(0x158)),submitProfile();}),_0x3f7783[_0x592e3a(0x163)](function(_0x21f75e){const _0x12c5d9=_0x592e3a;if(_0x21f75e){validateForm();const _0xfcc80b=_0x28fff2[_0x12c5d9(0x14e)](_0x12c5d9(0x122))[_0x12c5d9(0x127)](_0x21f75e[_0x12c5d9(0x114)]),_0x1caf08=new Date();_0xfcc80b[_0x12c5d9(0x123)]({'lastActive':_0x1caf08},{'merge':!![]});const _0x3733cf=_0x28fff2[_0x12c5d9(0x14e)](_0x12c5d9(0x122))['doc'](_0x3f7783[_0x12c5d9(0x124)][_0x12c5d9(0x114)]);_0x3733cf[_0x12c5d9(0x149)]()[_0x12c5d9(0x140)](_0x3650c4=>{const _0x347097=_0x12c5d9;if(_0x3650c4[_0x347097(0x136)]){const _0x1d96ff=_0x3650c4['data']();_0x3142b7[_0x347097(0x155)]=_0x1d96ff[_0x347097(0x146)],_0x27af44[_0x347097(0x155)]=_0x1d96ff['senderId'],_0x4981c7['value']=_0x1d96ff[_0x347097(0x141)],bio[_0x347097(0x155)]&&(bio[_0x347097(0x155)]=_0x1d96ff[_0x347097(0x11d)]),console[_0x347097(0x15e)](_0x1d96ff[_0x347097(0x142)]),document[_0x347097(0x121)]('.profile-picture-picker-image')[_0x347097(0x166)]=_0x1d96ff[_0x347097(0x142)]==''?'https://placeholder.co/100x100':_0x1d96ff['profileIMG'];}});}else alert(_0x12c5d9(0x115)),window[_0x12c5d9(0x144)][_0x12c5d9(0x156)]=_0x12c5d9(0x164);});});