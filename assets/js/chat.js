const a0_0x22aee9=a0_0x10ed;(function(_0x9dec6,_0xa28094){const _0x884a22=a0_0x10ed,_0x6cced0=_0x9dec6();while(!![]){try{const _0x954056=parseInt(_0x884a22(0xad))/0x1+parseInt(_0x884a22(0x95))/0x2*(-parseInt(_0x884a22(0x74))/0x3)+parseInt(_0x884a22(0x99))/0x4*(-parseInt(_0x884a22(0xc3))/0x5)+-parseInt(_0x884a22(0x81))/0x6*(-parseInt(_0x884a22(0x70))/0x7)+-parseInt(_0x884a22(0x86))/0x8+-parseInt(_0x884a22(0x8a))/0x9*(-parseInt(_0x884a22(0x76))/0xa)+parseInt(_0x884a22(0x79))/0xb*(-parseInt(_0x884a22(0xc9))/0xc);if(_0x954056===_0xa28094)break;else _0x6cced0['push'](_0x6cced0['shift']());}catch(_0x1098e7){_0x6cced0['push'](_0x6cced0['shift']());}}}(a0_0x26ed,0xd2542));const sidebarList=document['getElementById'](a0_0x22aee9(0x88)),chatMessages=document['getElementById'](a0_0x22aee9(0xb8)),chatInput=document['getElementById'](a0_0x22aee9(0x7e)),sendButton=document[a0_0x22aee9(0x94)](a0_0x22aee9(0xb2)),searchInput=document[a0_0x22aee9(0x94)](a0_0x22aee9(0x8f)),allSidebarUsers=[];function a0_0x26ed(){const _0x39f569=['trim','innerHTML','email','push','scrollHeight','location','target','Users','1471906bFudLa','timestamp','data','key','get','send-btn','uid','collection','flex\x20items-start\x20space-x-3\x20','\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-400\x20mt-1\x22>','chat-messages','justify-end','href','includes','addEventListener','input','senderId','\x22\x20class=\x22w-8\x20h-8\x20rounded-full\x22>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-w-xs\x20bg-gray-200\x20text-black\x20rounded-lg\x20px-3\x20py-2\x22>','keydown','add','2-digit','866155WBxhoo','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','className','where','Chat','profilePic','120iVmIpn','userId','click','scrollTop','appendChild','7eZiqvJ','You','Other','firestore','3LyFFNV','toLowerCase','10WqbIQa','filter','doc','52426BByPgB','empty','name','\x0a\x20\x20\x20\x20<img\x20src=\x22','value','chat-input','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-w-xs\x20bg-blue-500\x20text-white\x20rounded-lg\x20px-3\x20py-2\x22>','search','1386FhMxnv','/assets/img/default_user.jpeg','profileIMG','\x0a\x20\x20','\x0a\x20\x20\x20\x20','1994184SnGJYy','/signin.html','chat-sidebar-list','</span>\x0a\x20\x20','212499BtgVau','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','createElement','Messages','toLocaleTimeString','user-search-email','chatId','p-4\x20flex\x20items-center\x20space-x-2\x20hover:bg-gray-100\x20cursor-pointer','chat','Enter','getElementById','328156LhdyNW','length','children','Unknown','4exlVbx','chat-header','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','exists','then','onAuthStateChanged','FieldValue','messageText','forEach','onSnapshot','docs'];a0_0x26ed=function(){return _0x39f569;};return a0_0x26ed();}let CURRENT_USER_ID=null,CURRENT_USER_NAME='',CURRENT_USER_PIC='/assets/img/default_user.jpeg',lastTimestamp=null,unsubscribeMessages=null;firebase['auth']()[a0_0x22aee9(0x9f)](async _0x3042c0=>{const _0x29481d=a0_0x22aee9;if(!_0x3042c0)return window[_0x29481d(0xaa)][_0x29481d(0xba)]=_0x29481d(0x87);CURRENT_USER_ID=_0x3042c0[_0x29481d(0xb3)];const _0x330e31=await firebase[_0x29481d(0x73)]()['collection'](_0x29481d(0xac))[_0x29481d(0x78)](CURRENT_USER_ID)[_0x29481d(0xb1)](),_0x4f8974=_0x330e31[_0x29481d(0xaf)]();CURRENT_USER_NAME=_0x4f8974['name']||_0x29481d(0x71),CURRENT_USER_PIC=_0x4f8974[_0x29481d(0x83)]||_0x29481d(0x82),loadSidebarFromUserHistory(_0x4f8974['userHistory']||{});const _0x34a12a=new URLSearchParams(window[_0x29481d(0xaa)][_0x29481d(0x80)]),_0x46b631=_0x34a12a[_0x29481d(0xb1)](_0x29481d(0x92));_0x46b631&&firebase[_0x29481d(0x73)]()[_0x29481d(0xb4)](_0x29481d(0xac))[_0x29481d(0x78)](_0x46b631)[_0x29481d(0xb1)]()[_0x29481d(0x9e)](_0x3c42a9=>{const _0x28775b=_0x29481d;if(_0x3c42a9[_0x28775b(0x9d)]){const _0x48d612=_0x3c42a9[_0x28775b(0xaf)]();document['getElementById'](_0x28775b(0x9a))[_0x28775b(0x9b)]=_0x48d612['name']||_0x28775b(0xc7),activeUserId=_0x46b631,loadChatHistory(_0x46b631);}});});function loadSidebarFromUserHistory(_0x3e9393){const _0x47c2ca=a0_0x22aee9;_0x3e9393[_0x47c2ca(0xa2)](_0x276535=>{const _0x524071=_0x47c2ca;firebase[_0x524071(0x73)]()[_0x524071(0xb4)](_0x524071(0xac))[_0x524071(0x78)](_0x276535)[_0x524071(0xb1)]()[_0x524071(0x9e)](_0x4a76d6=>{const _0x343472=_0x524071;if(_0x4a76d6[_0x343472(0x9d)]){const _0x4e0a6c=_0x4a76d6[_0x343472(0xaf)](),_0x42120e=_0x4e0a6c[_0x343472(0x7b)]||_0x343472(0x98),_0x2074cc=_0x4e0a6c[_0x343472(0x83)]||_0x343472(0x82),_0x28064b=_0x4e0a6c[_0x343472(0xa7)]||'';add_to_sidebar(_0x42120e,_0x2074cc,_0x276535,_0x28064b);}});});}function add_to_sidebar(_0x562abc,_0x296950,_0x4fa3f8,_0x5e5a3c){const _0x3ed89e=a0_0x22aee9,_0x4f8a27=document[_0x3ed89e(0x8c)]('li');_0x4f8a27[_0x3ed89e(0xc5)]=_0x3ed89e(0x91),_0x4f8a27[_0x3ed89e(0xa6)]=_0x3ed89e(0x7c)+_0x296950+'\x22\x20class=\x22w-10\x20h-10\x20rounded-full\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>'+_0x562abc+_0x3ed89e(0x89),_0x4f8a27[_0x3ed89e(0xbc)](_0x3ed89e(0x6d),()=>{const _0x585ace=_0x3ed89e;document[_0x585ace(0x94)](_0x585ace(0x9a))[_0x585ace(0x9b)]=_0x562abc,chatMessages[_0x585ace(0xa6)]='',activeUserId=_0x4fa3f8,loadChatHistory(_0x4fa3f8);}),sidebarList[_0x3ed89e(0x6f)](_0x4f8a27),allSidebarUsers[_0x3ed89e(0xa8)]({'name':_0x562abc,'profilePic':_0x296950,'userId':_0x4fa3f8,'email':_0x5e5a3c});}function updateSidebarList(_0x5ace4c){const _0x469466=a0_0x22aee9;sidebarList[_0x469466(0xa6)]='';const _0x2b2d66=_0x5ace4c[_0x469466(0x75)]();allSidebarUsers[_0x469466(0x77)](_0x173b1d=>_0x173b1d[_0x469466(0x7b)]['toLowerCase']()[_0x469466(0xbb)](_0x2b2d66)||_0x173b1d[_0x469466(0xca)][_0x469466(0x75)]()[_0x469466(0xbb)](_0x2b2d66)||_0x173b1d[_0x469466(0xa7)][_0x469466(0x75)]()[_0x469466(0xbb)](_0x2b2d66))[_0x469466(0xa2)](_0x64ae16=>{const _0x525854=_0x469466,_0x4ad815=document['createElement']('li');_0x4ad815[_0x525854(0xc5)]=_0x525854(0x91),_0x4ad815[_0x525854(0xa6)]=_0x525854(0x9c)+_0x64ae16[_0x525854(0xc8)]+'\x22\x20class=\x22w-10\x20h-10\x20rounded-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>'+_0x64ae16[_0x525854(0x7b)]+'</span>\x0a\x20\x20\x20\x20\x20\x20',_0x4ad815[_0x525854(0xbc)](_0x525854(0x6d),()=>{const _0x43632f=_0x525854;document[_0x43632f(0x94)](_0x43632f(0x9a))[_0x43632f(0x9b)]=_0x64ae16[_0x43632f(0x7b)],chatMessages[_0x43632f(0xa6)]='',activeUserId=_0x64ae16[_0x43632f(0xca)],loadChatHistory(_0x64ae16[_0x43632f(0xca)]);}),sidebarList['appendChild'](_0x4ad815);}),sidebarList[_0x469466(0x97)][_0x469466(0x96)]===0x0&&_0x5ace4c[_0x469466(0xbb)]('@')&&firebase['firestore']()['collection'](_0x469466(0xac))[_0x469466(0xc6)](_0x469466(0xa7),'==',_0x5ace4c)[_0x469466(0xb1)]()[_0x469466(0x9e)](_0xfdab8b=>{const _0xe40ff=_0x469466;if(!_0xfdab8b[_0xe40ff(0x7a)]){const _0x2f4799=_0xfdab8b[_0xe40ff(0xa4)][0x0],_0x2e6cb7=_0x2f4799[_0xe40ff(0xaf)](),_0x2b9581=_0x2f4799['id'],_0x7a4990=_0x2e6cb7['name']||'Unknown',_0x3fbc6c=_0x2e6cb7[_0xe40ff(0x83)]||_0xe40ff(0x82),_0x46c855=_0x2e6cb7[_0xe40ff(0xa7)]||'';add_to_sidebar(_0x7a4990,_0x3fbc6c,_0x2b9581,_0x46c855),updateSidebarList(_0x5ace4c);}});}searchInput['addEventListener'](a0_0x22aee9(0xbd),_0xab4998=>{const _0x20ba1f=a0_0x22aee9;updateSidebarList(_0xab4998[_0x20ba1f(0xab)][_0x20ba1f(0x7d)]);});function add_message(_0x4e8aab,_0x1302ef,_0x1d4722,_0xdd0076,_0x474a89){const _0x4542eb=a0_0x22aee9,_0x5064e7=document[_0x4542eb(0x8c)]('div');_0x5064e7[_0x4542eb(0xc5)]=_0x4542eb(0xb5)+(_0x1302ef?_0x4542eb(0xb9):'');const _0x321acf=new Date()[_0x4542eb(0x8e)]([],{'hour':_0x4542eb(0xc2),'minute':_0x4542eb(0xc2)});_0x5064e7[_0x4542eb(0xa6)]=_0x4542eb(0x85)+(_0x1302ef?_0x4542eb(0x7f)+_0x474a89+_0x4542eb(0xb7)+_0x321acf+_0x4542eb(0x8b)+_0xdd0076+'\x22\x20class=\x22w-8\x20h-8\x20rounded-full\x22>\x0a\x20\x20\x20\x20':_0x4542eb(0xb6)+_0xdd0076+_0x4542eb(0xbf)+_0x474a89+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-400\x22>'+_0x321acf+_0x4542eb(0xc4))+_0x4542eb(0x84),chatMessages[_0x4542eb(0x6f)](_0x5064e7),chatMessages[_0x4542eb(0x6e)]=chatMessages[_0x4542eb(0xa9)];}function a0_0x10ed(_0x4ca27b,_0x3deab0){const _0x26ed95=a0_0x26ed();return a0_0x10ed=function(_0x10ed9c,_0x491205){_0x10ed9c=_0x10ed9c-0x6d;let _0x4002c4=_0x26ed95[_0x10ed9c];return _0x4002c4;},a0_0x10ed(_0x4ca27b,_0x3deab0);}sendButton[a0_0x22aee9(0xbc)](a0_0x22aee9(0x6d),()=>{const _0x33c3d7=a0_0x22aee9,_0x3a54c7=chatInput[_0x33c3d7(0x7d)][_0x33c3d7(0xa5)]();if(!_0x3a54c7)return;firebase['firestore']()['collection'](_0x33c3d7(0x8d))[_0x33c3d7(0xc1)]({'senderId':CURRENT_USER_ID,'receiverId':activeUserId,'chatId':getChatId(CURRENT_USER_ID,activeUserId),'messageText':_0x3a54c7,'timestamp':firebase['firestore']['FieldValue']['serverTimestamp']()}),firebase[_0x33c3d7(0x73)]()[_0x33c3d7(0xb4)](_0x33c3d7(0xac))['doc'](CURRENT_USER_ID)['update']({'userHistory':firebase[_0x33c3d7(0x73)][_0x33c3d7(0xa0)]['arrayUnion'](activeUserId)}),chatInput[_0x33c3d7(0x7d)]='';}),chatInput['addEventListener'](a0_0x22aee9(0xc0),_0x52bcc0=>{const _0x149cb4=a0_0x22aee9;_0x52bcc0[_0x149cb4(0xb0)]===_0x149cb4(0x93)&&sendButton['click']();});function getChatId(_0x181205,_0x25b9f7){return[_0x181205,_0x25b9f7]['sort']()['join']('-');}function loadChatHistory(_0x5e45e1){const _0xd37cc6=a0_0x22aee9,_0x3004e4=getChatId(CURRENT_USER_ID,_0x5e45e1);unsubscribeMessages&&(unsubscribeMessages(),unsubscribeMessages=null),firebase[_0xd37cc6(0x73)]()[_0xd37cc6(0xb4)](_0xd37cc6(0xac))[_0xd37cc6(0x78)](_0x5e45e1)['get']()['then'](_0x3e69bf=>{const _0x2d1c40=_0xd37cc6,_0x51db62=_0x3e69bf[_0x2d1c40(0xaf)](),_0x5544a3=_0x51db62?.['name']||_0x2d1c40(0x72),_0x4876e4=_0x51db62?.[_0x2d1c40(0x83)]||_0x2d1c40(0x82);unsubscribeMessages=firebase[_0x2d1c40(0x73)]()[_0x2d1c40(0xb4)](_0x2d1c40(0x8d))[_0x2d1c40(0xc6)](_0x2d1c40(0x90),'==',_0x3004e4)['orderBy'](_0x2d1c40(0xae))[_0x2d1c40(0xa3)](_0x2c1bca=>{const _0x230ba0=_0x2d1c40;chatMessages['innerHTML']='',_0x2c1bca[_0x230ba0(0xa2)](_0x50bba4=>{const _0x453478=_0x230ba0,_0x16ec11=_0x50bba4['data'](),_0x521672=_0x16ec11[_0x453478(0xbe)]===CURRENT_USER_ID,_0x1bcebb=_0x521672?CURRENT_USER_NAME:_0x5544a3,_0x442468=_0x521672?CURRENT_USER_PIC:_0x4876e4;add_message(_0x16ec11[_0x453478(0xbe)],_0x521672,_0x1bcebb,_0x442468,_0x16ec11[_0x453478(0xa1)]);});});});}