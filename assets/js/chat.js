const a0_0x46ee81=a0_0x171e;(function(_0x57bbba,_0x32ca46){const _0x4abf30=a0_0x171e,_0x5c254e=_0x57bbba();while(!![]){try{const _0xcb8355=parseInt(_0x4abf30(0xc5))/0x1*(-parseInt(_0x4abf30(0x75))/0x2)+-parseInt(_0x4abf30(0x9e))/0x3+parseInt(_0x4abf30(0xb4))/0x4+-parseInt(_0x4abf30(0x7f))/0x5*(-parseInt(_0x4abf30(0xad))/0x6)+-parseInt(_0x4abf30(0x8a))/0x7+parseInt(_0x4abf30(0x9c))/0x8*(parseInt(_0x4abf30(0xc7))/0x9)+parseInt(_0x4abf30(0x96))/0xa*(parseInt(_0x4abf30(0xbb))/0xb);if(_0xcb8355===_0x32ca46)break;else _0x5c254e['push'](_0x5c254e['shift']());}catch(_0x1fa2cc){_0x5c254e['push'](_0x5c254e['shift']());}}}(a0_0x2da0,0x92be9));const sidebarList=document[a0_0x46ee81(0xc0)](a0_0x46ee81(0x6b)),chatMessages=document[a0_0x46ee81(0xc0)](a0_0x46ee81(0xa0)),chatInput=document[a0_0x46ee81(0xc0)](a0_0x46ee81(0xa2)),sendButton=document['getElementById'](a0_0x46ee81(0x82)),searchInput=document[a0_0x46ee81(0xc0)](a0_0x46ee81(0x81)),allSidebarUsers=[];let CURRENT_USER_ID=null,CURRENT_USER_NAME='',CURRENT_USER_PIC=a0_0x46ee81(0x8d),lastTimestamp=null,unsubscribeMessages=null;firebase[a0_0x46ee81(0xa4)]()[a0_0x46ee81(0xa1)](async _0x54fe6c=>{const _0x508caf=a0_0x46ee81;if(!_0x54fe6c)return window[_0x508caf(0xb2)][_0x508caf(0x83)]=_0x508caf(0x9f);CURRENT_USER_ID=_0x54fe6c[_0x508caf(0x7d)];const _0x558c26=await firebase['firestore']()[_0x508caf(0x68)](_0x508caf(0x80))[_0x508caf(0x7b)](CURRENT_USER_ID)[_0x508caf(0x9b)](),_0x9d2354=_0x558c26['data']();CURRENT_USER_NAME=_0x9d2354['name']||_0x508caf(0x79),CURRENT_USER_PIC=_0x9d2354[_0x508caf(0xb5)]||'/assets/img/default_user.jpeg',loadSidebarFromUserHistory(_0x9d2354[_0x508caf(0x95)]||{});const _0x339311=new URLSearchParams(window[_0x508caf(0xb2)][_0x508caf(0x78)]),_0x2aec67=_0x339311['get'](_0x508caf(0x97));_0x2aec67&&firebase[_0x508caf(0x6e)]()[_0x508caf(0x68)](_0x508caf(0x80))[_0x508caf(0x7b)](_0x2aec67)[_0x508caf(0x9b)]()[_0x508caf(0xb1)](_0x405a72=>{const _0x179d72=_0x508caf;if(_0x405a72[_0x179d72(0xc1)]){const _0x43ad53=_0x405a72[_0x179d72(0xac)]();document[_0x179d72(0xc0)](_0x179d72(0x9a))[_0x179d72(0xa9)]=_0x43ad53[_0x179d72(0x8e)]||_0x179d72(0xa5),activeUserId=_0x2aec67,loadChatHistory(_0x2aec67);}});});function loadSidebarFromUserHistory(_0x133412){_0x133412['forEach'](_0x1140f1=>{const _0x538e78=a0_0x171e;firebase[_0x538e78(0x6e)]()[_0x538e78(0x68)](_0x538e78(0x80))['doc'](_0x1140f1)[_0x538e78(0x9b)]()['then'](_0x23ad72=>{const _0x5e6207=_0x538e78;if(_0x23ad72[_0x5e6207(0xc1)]){const _0x18ccb1=_0x23ad72[_0x5e6207(0xac)](),_0x596f41=_0x18ccb1[_0x5e6207(0x8e)]||_0x5e6207(0x90),_0x1f9d39=_0x18ccb1[_0x5e6207(0xb5)]||_0x5e6207(0x8d),_0x35e5ac=_0x18ccb1[_0x5e6207(0xa6)]||'';add_to_sidebar(_0x596f41,_0x1f9d39,_0x1140f1,_0x35e5ac);}});});}function add_to_sidebar(_0x40a698,_0x39c460,_0x742b0a,_0x3fa3cd){const _0x40b6bb=a0_0x46ee81,_0x21a90b=document['createElement']('li');_0x21a90b[_0x40b6bb(0xbe)]=_0x40b6bb(0xb9),_0x21a90b['innerHTML']=_0x40b6bb(0x73)+_0x39c460+'\x22\x20class=\x22w-10\x20h-10\x20rounded-full\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>'+_0x40a698+_0x40b6bb(0x69),_0x21a90b[_0x40b6bb(0xbc)](_0x40b6bb(0xb7),()=>{const _0x51504a=_0x40b6bb;document[_0x51504a(0xc0)](_0x51504a(0x9a))[_0x51504a(0xa9)]=_0x40a698,chatMessages['innerHTML']='',activeUserId=_0x742b0a,loadChatHistory(_0x742b0a);}),sidebarList[_0x40b6bb(0x88)](_0x21a90b),allSidebarUsers[_0x40b6bb(0xb6)]({'name':_0x40a698,'profilePic':_0x39c460,'userId':_0x742b0a,'email':_0x3fa3cd});}function a0_0x2da0(){const _0x59d346=['101054pwlXwG','value','Enter','search','You','trim','doc','</span>\x0a\x20\x20\x20\x20\x20\x20','uid','2-digit','2308795qSRNfz','Users','user-search-email','send-btn','href','onSnapshot','createElement','timestamp','children','appendChild','\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','6158964SMexkb','innerHTML','Messages','/assets/img/default_user.jpeg','name','update','Unknown','profilePic','orderBy','join','target','userHistory','153390WkrfMQ','chat','sort','add','chat-header','get','8UxNXcy','div','2118846hxEYgO','/signin.html','chat-messages','onAuthStateChanged','chat-input','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','auth','Chat','email','filter','chatId','textContent','toLocaleTimeString','empty','data','6sKeMqC','arrayUnion','\x22\x20class=\x22w-8\x20h-8\x20rounded-full\x22>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-w-xs\x20bg-gray-200\x20text-black\x20rounded-lg\x20px-3\x20py-2\x22>','length','then','location','userId','1089940EfLKtP','profileIMG','push','click','scrollHeight','p-4\x20flex\x20items-center\x20space-x-2\x20hover:bg-gray-100\x20cursor-pointer','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','638YgsjjY','addEventListener','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-400\x22>','className','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','getElementById','exists','keydown','\x22\x20class=\x22w-10\x20h-10\x20rounded-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>','serverTimestamp','3ykuBwk','FieldValue','6433866FfNhgz','messageText','collection','</span>\x0a\x20\x20','\x22\x20class=\x22w-8\x20h-8\x20rounded-full\x22>\x0a\x20\x20\x20\x20','chat-sidebar-list','includes','Other','firestore','input','toLowerCase','\x0a\x20\x20','docs','\x0a\x20\x20\x20\x20<img\x20src=\x22','forEach'];a0_0x2da0=function(){return _0x59d346;};return a0_0x2da0();}function updateSidebarList(_0x54bc92){const _0x29b98b=a0_0x46ee81;sidebarList[_0x29b98b(0x8b)]='';const _0xc8f9f0=_0x54bc92['toLowerCase']();allSidebarUsers[_0x29b98b(0xa7)](_0x18e688=>_0x18e688[_0x29b98b(0x8e)][_0x29b98b(0x70)]()[_0x29b98b(0x6c)](_0xc8f9f0)||_0x18e688[_0x29b98b(0xb3)]['toLowerCase']()[_0x29b98b(0x6c)](_0xc8f9f0)||_0x18e688[_0x29b98b(0xa6)][_0x29b98b(0x70)]()['includes'](_0xc8f9f0))[_0x29b98b(0x74)](_0xc3f9e0=>{const _0x2f63c5=_0x29b98b,_0x451d28=document[_0x2f63c5(0x85)]('li');_0x451d28[_0x2f63c5(0xbe)]=_0x2f63c5(0xb9),_0x451d28['innerHTML']=_0x2f63c5(0xa3)+_0xc3f9e0[_0x2f63c5(0x91)]+_0x2f63c5(0xc3)+_0xc3f9e0['name']+_0x2f63c5(0x7c),_0x451d28['addEventListener'](_0x2f63c5(0xb7),()=>{const _0x2447b9=_0x2f63c5;document[_0x2447b9(0xc0)](_0x2447b9(0x9a))[_0x2447b9(0xa9)]=_0xc3f9e0['name'],chatMessages[_0x2447b9(0x8b)]='',activeUserId=_0xc3f9e0[_0x2447b9(0xb3)],loadChatHistory(_0xc3f9e0[_0x2447b9(0xb3)]);}),sidebarList[_0x2f63c5(0x88)](_0x451d28);}),sidebarList[_0x29b98b(0x87)][_0x29b98b(0xb0)]===0x0&&_0x54bc92[_0x29b98b(0x6c)]('@')&&firebase[_0x29b98b(0x6e)]()[_0x29b98b(0x68)](_0x29b98b(0x80))['where'](_0x29b98b(0xa6),'==',_0x54bc92)['get']()['then'](_0x15a75c=>{const _0xd8723c=_0x29b98b;if(!_0x15a75c[_0xd8723c(0xab)]){const _0x373f40=_0x15a75c[_0xd8723c(0x72)][0x0],_0x26fc48=_0x373f40[_0xd8723c(0xac)](),_0x3e54f4=_0x373f40['id'],_0x4e7029=_0x26fc48[_0xd8723c(0x8e)]||_0xd8723c(0x90),_0x45491e=_0x26fc48[_0xd8723c(0xb5)]||_0xd8723c(0x8d),_0x2674de=_0x26fc48['email']||'';add_to_sidebar(_0x4e7029,_0x45491e,_0x3e54f4,_0x2674de),updateSidebarList(_0x54bc92);}});}function a0_0x171e(_0x46b6b0,_0x24bce4){const _0x2da099=a0_0x2da0();return a0_0x171e=function(_0x171e26,_0x94b359){_0x171e26=_0x171e26-0x68;let _0x11bd58=_0x2da099[_0x171e26];return _0x11bd58;},a0_0x171e(_0x46b6b0,_0x24bce4);}searchInput['addEventListener'](a0_0x46ee81(0x6f),_0x4a4912=>{const _0x175d14=a0_0x46ee81;updateSidebarList(_0x4a4912[_0x175d14(0x94)][_0x175d14(0x76)]);});function add_message(_0x352933,_0x303212,_0x4c5f13,_0x579d8c,_0x10913e){const _0x37716f=a0_0x46ee81,_0x509dab=document['createElement'](_0x37716f(0x9d));_0x509dab[_0x37716f(0xbe)]='flex\x20items-start\x20space-x-3\x20'+(_0x303212?'justify-end':'');const _0x56791f=new Date()[_0x37716f(0xaa)]([],{'hour':_0x37716f(0x7e),'minute':_0x37716f(0x7e)});_0x509dab[_0x37716f(0x8b)]='\x0a\x20\x20\x20\x20'+(_0x303212?'\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-w-xs\x20bg-blue-500\x20text-white\x20rounded-lg\x20px-3\x20py-2\x22>'+_0x10913e+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-400\x20mt-1\x22>'+_0x56791f+_0x37716f(0xbf)+_0x579d8c+_0x37716f(0x6a):_0x37716f(0x89)+_0x579d8c+_0x37716f(0xaf)+_0x10913e+_0x37716f(0xbd)+_0x56791f+_0x37716f(0xba))+_0x37716f(0x71),chatMessages[_0x37716f(0x88)](_0x509dab),chatMessages['scrollTop']=chatMessages[_0x37716f(0xb8)];}sendButton[a0_0x46ee81(0xbc)](a0_0x46ee81(0xb7),()=>{const _0x33ce5b=a0_0x46ee81,_0x118af9=chatInput[_0x33ce5b(0x76)][_0x33ce5b(0x7a)]();if(!_0x118af9)return;firebase[_0x33ce5b(0x6e)]()['collection'](_0x33ce5b(0x8c))[_0x33ce5b(0x99)]({'senderId':CURRENT_USER_ID,'receiverId':activeUserId,'chatId':getChatId(CURRENT_USER_ID,activeUserId),'messageText':_0x118af9,'timestamp':firebase[_0x33ce5b(0x6e)]['FieldValue'][_0x33ce5b(0xc4)]()}),firebase['firestore']()['collection']('Users')[_0x33ce5b(0x7b)](CURRENT_USER_ID)[_0x33ce5b(0x8f)]({'userHistory':firebase[_0x33ce5b(0x6e)][_0x33ce5b(0xc6)][_0x33ce5b(0xae)](activeUserId)}),chatInput[_0x33ce5b(0x76)]='';}),chatInput[a0_0x46ee81(0xbc)](a0_0x46ee81(0xc2),_0x2ce9f8=>{const _0x54989f=a0_0x46ee81;_0x2ce9f8['key']===_0x54989f(0x77)&&sendButton[_0x54989f(0xb7)]();});function getChatId(_0x4930b0,_0x256c3a){const _0x42d271=a0_0x46ee81;return[_0x4930b0,_0x256c3a][_0x42d271(0x98)]()[_0x42d271(0x93)]('-');}function loadChatHistory(_0x3f680b){const _0x5beb98=a0_0x46ee81,_0x27d8dd=getChatId(CURRENT_USER_ID,_0x3f680b);unsubscribeMessages&&(unsubscribeMessages(),unsubscribeMessages=null),firebase[_0x5beb98(0x6e)]()['collection'](_0x5beb98(0x80))[_0x5beb98(0x7b)](_0x3f680b)['get']()[_0x5beb98(0xb1)](_0xf16dd3=>{const _0x34a5af=_0x5beb98,_0x4b9c72=_0xf16dd3[_0x34a5af(0xac)](),_0xccf911=_0x4b9c72?.['name']||_0x34a5af(0x6d),_0x303d7a=_0x4b9c72?.[_0x34a5af(0xb5)]||_0x34a5af(0x8d);unsubscribeMessages=firebase[_0x34a5af(0x6e)]()[_0x34a5af(0x68)](_0x34a5af(0x8c))['where'](_0x34a5af(0xa8),'==',_0x27d8dd)[_0x34a5af(0x92)](_0x34a5af(0x86))[_0x34a5af(0x84)](_0x44e502=>{const _0xb57b05=_0x34a5af;chatMessages['innerHTML']='',_0x44e502[_0xb57b05(0x74)](_0x59d174=>{const _0x4f85f=_0xb57b05,_0x16a12d=_0x59d174[_0x4f85f(0xac)](),_0x5dc989=_0x16a12d['senderId']===CURRENT_USER_ID,_0x58c1e0=_0x5dc989?CURRENT_USER_NAME:_0xccf911,_0x3daa4a=_0x5dc989?CURRENT_USER_PIC:_0x303d7a;add_message(_0x16a12d['senderId'],_0x5dc989,_0x58c1e0,_0x3daa4a,_0x16a12d[_0x4f85f(0xc8)]);});});});}