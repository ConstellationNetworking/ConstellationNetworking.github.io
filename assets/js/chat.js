const a0_0x54c37d=a0_0x13fd;(function(_0x13232f,_0x31b2e7){const _0x313080=a0_0x13fd,_0x5901a1=_0x13232f();while(!![]){try{const _0x2246be=parseInt(_0x313080(0x1ed))/0x1+parseInt(_0x313080(0x1b6))/0x2+parseInt(_0x313080(0x1fb))/0x3+-parseInt(_0x313080(0x1c1))/0x4+-parseInt(_0x313080(0x1ce))/0x5*(-parseInt(_0x313080(0x1ba))/0x6)+parseInt(_0x313080(0x1d6))/0x7*(parseInt(_0x313080(0x1fc))/0x8)+parseInt(_0x313080(0x201))/0x9*(-parseInt(_0x313080(0x1c9))/0xa);if(_0x2246be===_0x31b2e7)break;else _0x5901a1['push'](_0x5901a1['shift']());}catch(_0x153040){_0x5901a1['push'](_0x5901a1['shift']());}}}(a0_0x5db8,0xae4d3));const sidebarList=document['getElementById'](a0_0x54c37d(0x1d7)),chatMessages=document[a0_0x54c37d(0x1b4)]('chat-messages'),chatInput=document[a0_0x54c37d(0x1b4)](a0_0x54c37d(0x1ee)),sendButton=document[a0_0x54c37d(0x1b4)](a0_0x54c37d(0x1cf)),searchInput=document[a0_0x54c37d(0x1b4)](a0_0x54c37d(0x1c5)),allSidebarUsers=[];function a0_0x13fd(_0x28b894,_0x182101){const _0x5db898=a0_0x5db8();return a0_0x13fd=function(_0x13fd47,_0x40dd64){_0x13fd47=_0x13fd47-0x1b4;let _0x28d00d=_0x5db898[_0x13fd47];return _0x28d00d;},a0_0x13fd(_0x28b894,_0x182101);}let CURRENT_USER_ID=null,CURRENT_USER_NAME='',CURRENT_USER_PIC='/assets/img/default_user.jpeg',lastTimestamp=null,unsubscribeMessages=null;firebase[a0_0x54c37d(0x1e6)]()[a0_0x54c37d(0x1d1)](async _0x1596fb=>{const _0x525534=a0_0x54c37d;if(!_0x1596fb)return window['location'][_0x525534(0x1c2)]='/signin.html';CURRENT_USER_ID=_0x1596fb[_0x525534(0x202)];const _0x4a7776=await firebase[_0x525534(0x1e9)]()[_0x525534(0x1cd)]('Users')['doc'](CURRENT_USER_ID)[_0x525534(0x1f3)](),_0x994a06=_0x4a7776[_0x525534(0x1f9)]();CURRENT_USER_NAME=_0x994a06[_0x525534(0x1c7)]||_0x525534(0x203),CURRENT_USER_PIC=_0x994a06['profileIMG']||_0x525534(0x1e2),loadSidebarFromUserHistory(_0x994a06['userHistory']||{});const _0x5034fc=new URLSearchParams(window[_0x525534(0x1e4)][_0x525534(0x1df)]),_0x3cf030=_0x5034fc[_0x525534(0x1f3)]('chat');_0x3cf030&&firebase[_0x525534(0x1e9)]()[_0x525534(0x1cd)](_0x525534(0x1d9))['doc'](_0x3cf030)['get']()[_0x525534(0x1bf)](_0x2747f7=>{const _0x4479d0=_0x525534;if(_0x2747f7['exists']){const _0x23dcaa=_0x2747f7[_0x4479d0(0x1f9)]();document[_0x4479d0(0x1b4)]('chat-header')[_0x4479d0(0x1e1)]=_0x23dcaa[_0x4479d0(0x1c7)]||_0x4479d0(0x1bc),activeUserId=_0x3cf030,loadChatHistory(_0x3cf030);}});});function loadSidebarFromUserHistory(_0x22f410){const _0x3457b1=a0_0x54c37d;for(const [_0x281e80,_0x57660f]of Object[_0x3457b1(0x1d2)](_0x22f410)){firebase[_0x3457b1(0x1e9)]()[_0x3457b1(0x1cd)]('Users')[_0x3457b1(0x1f6)](_0x281e80)[_0x3457b1(0x1f3)]()[_0x3457b1(0x1bf)](_0x140fdd=>{const _0x457f92=_0x3457b1,_0x2d9d50=_0x140fdd[_0x457f92(0x1f9)](),_0xfb4b0a=_0x2d9d50[_0x457f92(0x1b5)]||'/assets/img/default_user.jpeg';add_to_sidebar(_0x57660f,_0xfb4b0a,_0x281e80,_0x2d9d50[_0x457f92(0x1dd)]||'');});}}function add_to_sidebar(_0x11cb69,_0x3a8191,_0x2430e8,_0x5770b9){const _0x55371b=a0_0x54c37d,_0x45f67f=document[_0x55371b(0x1bd)]('li');_0x45f67f['className']=_0x55371b(0x1c4),_0x45f67f['innerHTML']=_0x55371b(0x1d0)+_0x3a8191+_0x55371b(0x1f5)+_0x11cb69+_0x55371b(0x1e0),_0x45f67f['addEventListener'](_0x55371b(0x1f0),()=>{const _0x5a6030=_0x55371b;document[_0x5a6030(0x1b4)](_0x5a6030(0x1ea))['textContent']=_0x11cb69,chatMessages['innerHTML']='',activeUserId=_0x2430e8,loadChatHistory(_0x2430e8);}),sidebarList[_0x55371b(0x1fd)](_0x45f67f),allSidebarUsers['push']({'name':_0x11cb69,'profilePic':_0x3a8191,'userId':_0x2430e8,'email':_0x5770b9});}function updateSidebarList(_0x25f661){const _0x29befb=a0_0x54c37d;sidebarList[_0x29befb(0x1de)]='';const _0x20be19=_0x25f661[_0x29befb(0x1d3)]();allSidebarUsers[_0x29befb(0x1e7)](_0x369585=>_0x369585[_0x29befb(0x1c7)][_0x29befb(0x1d3)]()[_0x29befb(0x1b9)](_0x20be19)||_0x369585[_0x29befb(0x1ec)]['toLowerCase']()['includes'](_0x20be19)||_0x369585[_0x29befb(0x1dd)][_0x29befb(0x1d3)]()[_0x29befb(0x1b9)](_0x20be19))['forEach'](_0xe3db0f=>{const _0x340f01=_0x29befb,_0x3c0d08=document[_0x340f01(0x1bd)]('li');_0x3c0d08[_0x340f01(0x1d5)]=_0x340f01(0x1c4),_0x3c0d08[_0x340f01(0x1de)]=_0x340f01(0x1ca)+_0xe3db0f[_0x340f01(0x1f4)]+_0x340f01(0x1f2)+_0xe3db0f[_0x340f01(0x1c7)]+_0x340f01(0x1f1),_0x3c0d08[_0x340f01(0x1b8)](_0x340f01(0x1f0),()=>{const _0x3e7e21=_0x340f01;document[_0x3e7e21(0x1b4)](_0x3e7e21(0x1ea))[_0x3e7e21(0x1e1)]=_0xe3db0f[_0x3e7e21(0x1c7)],chatMessages[_0x3e7e21(0x1de)]='',activeUserId=_0xe3db0f[_0x3e7e21(0x1ec)],loadChatHistory(_0xe3db0f[_0x3e7e21(0x1ec)]);}),sidebarList[_0x340f01(0x1fd)](_0x3c0d08);});}function a0_0x5db8(){const _0x3f69e0=['Enter','location','serverTimestamp','auth','filter','chatId','firestore','chat-header','trim','userId','617902gwomDu','chat-input','senderId','click','</span>\x0a\x20\x20\x20\x20\x20\x20','\x22\x20class=\x22w-10\x20h-10\x20rounded-full\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>','get','profilePic','\x22\x20class=\x22w-10\x20h-10\x20rounded-full\x22>\x0a\x20\x20\x20\x20<span\x20class=\x22font-medium\x22>','doc','FieldValue','target','data','</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-400\x22>','188403dvYOFb','16HtaTlB','appendChild','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','</div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Messages','563373LFolEN','uid','You','getElementById','profileIMG','1197958BnqGgG','\x22\x20class=\x22w-8\x20h-8\x20rounded-full\x22>\x0a\x20\x20\x20\x20','addEventListener','includes','5998818teNFgS','\x0a\x20\x20','Chat','createElement','add','then','flex\x20items-start\x20space-x-3\x20','3694764HOpCBZ','href','sort','p-4\x20flex\x20items-center\x20space-x-2\x20hover:bg-gray-100\x20cursor-pointer','user-search-email','div','name','scrollHeight','270YtpLWm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','input','scrollTop','collection','5CrYIUo','send-btn','\x0a\x20\x20\x20\x20<img\x20src=\x22','onAuthStateChanged','entries','toLowerCase','2-digit','className','3668924vGlCqO','chat-sidebar-list','value','Users','\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-w-xs\x20bg-blue-500\x20text-white\x20rounded-lg\x20px-3\x20py-2\x22>','orderBy','\x22\x20class=\x22w-8\x20h-8\x20rounded-full\x22>\x0a\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22max-w-xs\x20bg-gray-200\x20text-black\x20rounded-lg\x20px-3\x20py-2\x22>','email','innerHTML','search','</span>\x0a\x20\x20','textContent','/assets/img/default_user.jpeg'];a0_0x5db8=function(){return _0x3f69e0;};return a0_0x5db8();}searchInput['addEventListener'](a0_0x54c37d(0x1cb),_0x1800ae=>{const _0x4c2f7e=a0_0x54c37d;updateSidebarList(_0x1800ae[_0x4c2f7e(0x1f8)][_0x4c2f7e(0x1d8)]);});function add_message(_0x5255e7,_0x5c53a3,_0x15f253,_0x10c706,_0xb14b38){const _0x822c13=a0_0x54c37d,_0x58b943=document[_0x822c13(0x1bd)](_0x822c13(0x1c6));_0x58b943['className']=_0x822c13(0x1c0)+(_0x5c53a3?'justify-end':'');const _0x5692bd=new Date()['toLocaleTimeString']([],{'hour':_0x822c13(0x1d4),'minute':'2-digit'});_0x58b943['innerHTML']='\x0a\x20\x20\x20\x20'+(_0x5c53a3?_0x822c13(0x1da)+_0xb14b38+'</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22text-xs\x20text-gray-400\x20mt-1\x22>'+_0x5692bd+_0x822c13(0x1ff)+_0x10c706+_0x822c13(0x1b7):'\x0a\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x10c706+_0x822c13(0x1dc)+_0xb14b38+_0x822c13(0x1fa)+_0x5692bd+_0x822c13(0x1fe))+_0x822c13(0x1bb),chatMessages['appendChild'](_0x58b943),chatMessages[_0x822c13(0x1cc)]=chatMessages[_0x822c13(0x1c8)];}sendButton[a0_0x54c37d(0x1b8)]('click',()=>{const _0x139407=a0_0x54c37d,_0x1de692=chatInput['value'][_0x139407(0x1eb)]();if(!_0x1de692)return;firebase[_0x139407(0x1e9)]()[_0x139407(0x1cd)]('Messages')[_0x139407(0x1be)]({'senderId':CURRENT_USER_ID,'receiverId':activeUserId,'chatId':getChatId(CURRENT_USER_ID,activeUserId),'messageText':_0x1de692,'timestamp':firebase['firestore'][_0x139407(0x1f7)][_0x139407(0x1e5)]()})[_0x139407(0x1bf)](()=>{add_message(CURRENT_USER_ID,!![],CURRENT_USER_NAME,CURRENT_USER_PIC,_0x1de692);}),chatInput[_0x139407(0x1d8)]='';}),chatInput[a0_0x54c37d(0x1b8)]('keydown',_0x3baa73=>{const _0x10a540=a0_0x54c37d;_0x3baa73['key']===_0x10a540(0x1e3)&&sendButton[_0x10a540(0x1f0)]();});function getChatId(_0x31a70f,_0xe3384e){const _0x1d2bf5=a0_0x54c37d;return[_0x31a70f,_0xe3384e][_0x1d2bf5(0x1c3)]()['join']('-');}function loadChatHistory(_0x1a0f3b){const _0x49a34e=a0_0x54c37d,_0x5e8277=getChatId(CURRENT_USER_ID,_0x1a0f3b);unsubscribeMessages&&(unsubscribeMessages(),unsubscribeMessages=null),firebase[_0x49a34e(0x1e9)]()[_0x49a34e(0x1cd)](_0x49a34e(0x1d9))[_0x49a34e(0x1f6)](_0x1a0f3b)['get']()['then'](_0x2b4e82=>{const _0x2423ff=_0x49a34e,_0x5d12ee=_0x2b4e82['data'](),_0x384200=_0x5d12ee?.['name']||'Other',_0x465458=_0x5d12ee?.[_0x2423ff(0x1b5)]||'/assets/img/default_user.jpeg';unsubscribeMessages=firebase[_0x2423ff(0x1e9)]()[_0x2423ff(0x1cd)](_0x2423ff(0x200))['where'](_0x2423ff(0x1e8),'==',_0x5e8277)[_0x2423ff(0x1db)]('timestamp')['onSnapshot'](_0x1af326=>{const _0x5b30bd=_0x2423ff;chatMessages[_0x5b30bd(0x1de)]='',_0x1af326['forEach'](_0x34d15b=>{const _0x2f76b5=_0x5b30bd,_0x11c684=_0x34d15b[_0x2f76b5(0x1f9)](),_0x27bb61=_0x11c684[_0x2f76b5(0x1ef)]===CURRENT_USER_ID,_0x106169=_0x27bb61?CURRENT_USER_NAME:_0x384200,_0x9ce065=_0x27bb61?CURRENT_USER_PIC:_0x465458;add_message(_0x11c684[_0x2f76b5(0x1ef)],_0x27bb61,_0x106169,_0x9ce065,_0x11c684['messageText']);});});});}